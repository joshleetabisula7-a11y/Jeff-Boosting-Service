<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>KYC Boost Panel</title>

<!-- Font Awesome for icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet"/>

<style>
:root{
  --bg:#071019;
  --card:#09121a;
  --muted:#9aa6b2;
  --accent1:#00ffd5;
  --accent2:#00aaff;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:linear-gradient(180deg,#071019 0%, #000 100%);
  color:#e6f0f2;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:28px;
}
.container{
  width:100%;
  max-width:720px;
  background:radial-gradient(1200px 400px at 10% 10%, rgba(0,255,213,0.04), transparent 8%),
             linear-gradient(180deg, rgba(255,255,255,0.02), transparent 30%);
  border-radius:14px;
  padding:20px;
  box-shadow:0 10px 40px rgba(0,0,0,0.6);
}
.header{
  display:flex;
  gap:12px;
  align-items:center;
  margin-bottom:16px;
}
.brand {
  width:56px;height:56px;border-radius:12px;
  background:linear-gradient(135deg,var(--accent1),var(--accent2));
  display:flex;align-items:center;justify-content:center;color:#001;
  font-weight:800;font-size:20px;
  box-shadow:0 6px 18px rgba(0,170,255,0.12);
}
.title h1{margin:0;font-size:20px}
.title p{margin:0;color:var(--muted);font-size:13px}

.grid{
  display:grid;
  grid-template-columns:1fr 320px;
  gap:18px;
}
@media(max-width:880px){
  .grid{grid-template-columns:1fr; }
}

.card{
  background:var(--card);
  padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.02);
}

.select-row{display:flex;gap:10px;align-items:center}
label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}

select,input{
  width:100%;padding:11px;border-radius:8px;background:#061016;border:1px solid rgba(255,255,255,0.03);
  color: #e6f0f2;font-size:14px;
}
button.primary{
  width:100%;padding:12px;border-radius:10px;border:none;font-weight:600;
  background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#001;margin-top:12px;
  cursor:pointer;
}
.service-list{display:flex;flex-direction:column;gap:8px}
.service-item{display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;cursor:pointer}
.service-item .icon{
  width:40px;height:40px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:18px;
  background:rgba(255,255,255,0.02)
}
.service-item:hover{background:rgba(255,255,255,0.01)}

.status{
  margin-top:12px;padding:12px;border-radius:10px;background:#02060a;font-size:13px;color:var(--muted);min-height:120px;overflow:auto;
  white-space:pre-wrap;
}
.small{font-size:12px;color:var(--muted);margin-top:8px}
.footer{margin-top:14px;text-align:center;color:var(--muted);font-size:12px}
.disabled{opacity:0.6;pointer-events:none}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <div class="brand"><i class="fa-solid fa-bolt"></i></div>
    <div class="title">
      <h1>KYC BOOST PANEL</h1>
      <p>Multi-platform boosting panel ‚Äî connect to backend to place orders</p>
    </div>
  </div>

  <div class="grid">
    <!-- Left: controls -->
    <div class="card">
      <label for="service">Choose service</label>
      <select id="service">
        <option value="tiktok_views">üéµ TikTok Views</option>
        <option value="tiktok_likes">‚ù§Ô∏è TikTok Likes</option>
        <option value="tiktok_followers">üë§ TikTok Followers</option>
        <option value="instagram_views">üì∏ Instagram Views</option>
        <option value="youtube_views">‚ñ∂Ô∏è YouTube Views</option>
        <option value="twitter_views">üê¶ Twitter/X Views</option>
        <option value="facebook_boost">üìò Facebook Boost</option>
        <option value="telegram_views">‚úàÔ∏è Telegram Views</option>
      </select>

      <div style="margin-top:12px;">
        <label for="url">Target URL</label>
        <input id="url" placeholder="Paste target link (example: https://tiktok.com/@user/video/123...)" />
      </div>

      <button class="primary" id="btnStart" onclick="sendBoost()"><i class="fa-solid fa-rocket"></i> Start Boost</button>

      <div class="small">Note: Backend must be running and reachable from this page.</div>
    </div>

    <!-- Right: status & quick actions -->
    <div class="card">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <div style="font-weight:600">Status</div>
        <div style="font-size:13px;color:var(--muted)">Backend: <span id="backendState">unknown</span></div>
      </div>

      <div class="status" id="status">Waiting for action...</div>

      <div style="margin-top:10px;display:flex;gap:8px">
        <button onclick="healthCheck()" style="flex:1;padding:8px;border-radius:8px;border:none;background:#0b2633;color:#9feaf0;cursor:pointer">
          <i class="fa-solid fa-heart-pulse"></i> Health
        </button>
        <button onclick="showExample()" style="flex:1;padding:8px;border-radius:8px;border:none;background:#122226;color:#99c8c8;cursor:pointer">
          <i class="fa-solid fa-question"></i> Example
        </button>
      </div>

    </div>
  </div>

  <div class="footer">Made by KYC ‚Äî connect to your backend and deploy on Render (start command: <code>gunicorn backend:app</code>)</div>
</div>

<script>
const API_BASE = "/api"; // IMPORTANT: relative path so same domain works in Render

const statusEl = document.getElementById("status");
const backendStateEl = document.getElementById("backendState");
const btnStart = document.getElementById("btnStart");

function setStatus(txt, isError=false) {
  statusEl.textContent = txt;
  statusEl.style.color = isError ? "#ff8585" : "";
}

function prettyJson(obj){
  try { return JSON.stringify(obj, null, 2); } catch(e){ return String(obj); }
}

async function healthCheck(){
  setStatus("Checking backend health...");
  backendStateEl.textContent = "checking...";
  try {
    const res = await fetch(API_BASE + "/health");
    const data = await res.json();
    backendStateEl.textContent = (res.ok ? "alive" : "responding");
    setStatus(prettyJson({ status_code: res.status, body: data }));
  } catch(err) {
    backendStateEl.textContent = "down";
    setStatus("‚ùå Error connecting to backend (open console for details)", true);
    console.error(err);
  }
}

function showExample(){
  const service = document.getElementById("service");
  service.value = "tiktok_views";
  document.getElementById("url").value = "https://www.tiktok.com/@example/video/1234567890123456789";
  setStatus("Example data filled ‚Äî press Start Boost.");
}

function disableUI(d){
  if(d) btnStart.classList.add("disabled"); else btnStart.classList.remove("disabled");
  btnStart.disabled = d;
}

async function sendBoost(){
  const service = document.getElementById("service").value;
  const url = document.getElementById("url").value.trim();

  if(!url){
    setStatus("‚ùå Please paste the target URL.", true);
    return;
  }

  const map = {
    "tiktok_views": "/tiktok/views",
    "tiktok_likes": "/tiktok/likes",
    "tiktok_followers": "/tiktok/followers",
    "instagram_views": "/instagram/views",
    "youtube_views": "/youtube/views",
    "twitter_views": "/twitter/views",
    "facebook_boost": "/facebook/boost",
    "telegram_views": "/telegram/views"
  };

  const endpoint = map[service];
  if(!endpoint){
    setStatus("‚ùå Unknown service selected", true); return;
  }

  setStatus("‚è≥ Sending request to backend...");
  disableUI(true);

  try {
    const resp = await fetch(API_BASE + endpoint, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ url })
    });

    let body;
    try { body = await resp.json(); } catch(e){ body = await resp.text(); }

    if(!resp.ok){
      setStatus("‚ùå Backend returned an error:\n" + prettyJson({status: resp.status, body}), true);
    } else {
      setStatus("‚úÖ Success ‚Äî response:\n" + prettyJson(body));
    }
  } catch (e){
    console.error(e);
    setStatus("‚ùå Error connecting to backend (network or CORS issue). Open developer console for details.", true);
  } finally {
    disableUI(false);
  }
}

// Run a quick health check on load
healthCheck();
</script>

</body>
</html>
